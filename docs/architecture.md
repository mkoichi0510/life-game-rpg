# Architecture

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Life Game RPG ã®ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’å®šç¾©ã™ã‚‹ã€‚

---

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

äººç”Ÿã®è¡Œå‹•ã‚’ã€Œãƒ—ãƒ¬ã‚¤ã€ã¨ã—ã¦è¨˜éŒ²ã—ã€æ—¥æ¬¡ãƒªã‚¶ãƒ«ãƒˆã§ç¢ºå®š â†’ ã‚¹ã‚­ãƒ«ãƒã‚¤ãƒ³ãƒˆï¼ˆSPï¼‰ã‚’ç²å¾— â†’
ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®ç§°å·ãƒ»ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼ã‚’æˆé•·ã•ã›ã‚‹ **äººç”ŸRPGå‹ã‚·ã‚¹ãƒ†ãƒ **ã€‚

### è¨­è¨ˆæ€æƒ³ï¼ˆspec 14ç« ã‚ˆã‚Šï¼‰

> - ç¶™ç¶šã§ãã‚‹ã“ã¨ã‚ˆã‚Šã€Œè§¦ã‚ŠãŸããªã‚‹ã“ã¨ã€ã‚’å„ªå…ˆ
> - è¡Œå‹•é‡ã§ã¯ãªãã€ŒçŠ¶æ…‹ã€ã‚’è©•ä¾¡ã™ã‚‹
> - åœæ»ã¯å¤±æ•—ã§ã¯ãªããƒ©ãƒ³ã‚¯å¤‰å‹•ã¨ã„ã†ä»•æ§˜
> - äººç”Ÿã‚’"æ”»ç•¥å¯¾è±¡"ã¨ã—ã¦æ‰±ã†

ã“ã‚Œã‚‰ã®æ€æƒ³ã«åŸºã¥ãã€ä»¥ä¸‹ã‚’é‡è¦–ã™ã‚‹:

1. **æˆé•·ã®å³æ™‚ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯** - ãƒ—ãƒ¬ã‚¤ç™»éŒ²æ™‚ã«æœªç¢ºå®šXPã‚’å³åº§ã«è¡¨ç¤º
2. **ä¸­é•·æœŸç¶™ç¶šã«è€ãˆã‚‹è¨­è¨ˆ** - ç¢ºå®šå¾Œã¯ä¸å¤‰ã€å±¥æ­´ãŒç©ã¿é‡ãªã‚‹
3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸»å°** - ã‚«ãƒ†ã‚´ãƒª/ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå‰æ
4. **åœæ»ãŒã€Œå¤±æ•—ã€ã§ã¯ãªã„** - é€±ãƒ©ãƒ³ã‚¯ç§°å·ã§å¤‰å‹•ã‚’å¯è¦–åŒ–

---

## 2. æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ãƒ¬ã‚¤ãƒ¤ãƒ¼ | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å‚™è€ƒ |
|----------|------|------------|------|
| Framework | Next.js | 16.1.3 | App Routerä½¿ç”¨ |
| UI | React | 19.x | Server Componentsæ´»ç”¨ |
| Language | TypeScript | 5.x | å‹å®‰å…¨ |
| ORM | Prisma | 6.x | å‹ç”Ÿæˆã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
| Database | PostgreSQL | 17.x | æœ¬ç•ªç’°å¢ƒ |
| Styling | Tailwind CSS | 3.xï¼ˆ4.xå®‰å®šç‰ˆãƒªãƒªãƒ¼ã‚¹å¾Œã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰äºˆå®šï¼‰ | ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ |

### spec ã¨ã®å·®ç•°ï¼šæ°¸ç¶šåŒ–æ–¹é‡

| è¦³ç‚¹ | spec ã®æƒ³å®š | å®Ÿè£… | ç†ç”± |
|------|-------------|------|------|
| æ°¸ç¶šåŒ– | IndexedDBï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ï¼‰ | PostgreSQLï¼ˆã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ï¼‰ | Server Components/API Routesã¨ã®è¦ªå’Œæ€§ã€ãƒ‡ãƒ¼ã‚¿å …ç‰¢æ€§ |
| åŒæœŸ | ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ | ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å‰æ | Phase 1 ã§ã¯ã‚·ãƒ³ãƒ—ãƒ«ã•å„ªå…ˆ |
| èªè¨¼ | ãªã—ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰ | Auth.jsï¼ˆNextAuth v5ï¼‰å°å…¥æ¸ˆã¿ã ãŒæœªèªå¯ãƒ»å˜ä¸€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ³å®š | å¾Œç¶šã§userIdä»˜ä¸ã¨èªå¯ã‚’å®Ÿè£… |

---

## 3. ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Client (Browser)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              React Server Components                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚   Home     â”‚ â”‚  PlayLog   â”‚ â”‚  SkillTree     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   Page     â”‚ â”‚   Page     â”‚ â”‚   Page         â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                 â”‚
â”‚                     Server Actions                           â”‚
â”‚                            â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Next.js Server                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  API Routes / Actions                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ /api/play  â”‚ â”‚/api/result â”‚ â”‚ /api/skill     â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                  Prisma Client                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   PostgreSQL    â”‚
                    â”‚   Database      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ç”»é¢ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    subgraph æ—¥ä¸­ã®æ“ä½œ
        A[ãƒ›ãƒ¼ãƒ ç”»é¢] --> B[ãƒ—ãƒ¬ã‚¤ç™»éŒ²]
        B --> C{ã‚«ãƒ†ã‚´ãƒªé¸æŠ}
        C --> D[ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é¸æŠ]
        D --> E[ãƒ¡ãƒ¢å…¥åŠ›ä»»æ„]
        E --> F[ç™»éŒ²å®Œäº†]
        F --> A
    end

    subgraph å¤œã®æ“ä½œ
        A --> G[ä»Šæ—¥ã®ãƒªã‚¶ãƒ«ãƒˆ]
        G --> H{ç¢ºå®šã™ã‚‹?}
        H -->|Yes| I[æ—¥æ¬¡ç¢ºå®šå‡¦ç†]
        I --> J[ç¢ºå®šå®Œäº†ç”»é¢]
        J --> A
        H -->|No| A
    end

    subgraph æˆé•·ç¢ºèª
        A --> K[ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼]
        K --> L{è§£æ”¾å¯èƒ½?}
        L -->|Yes| M[ãƒãƒ¼ãƒ‰è§£æ”¾]
        M --> K
        L -->|No| K
        K --> A
    end
```

### ç”»é¢ä¸€è¦§ï¼ˆPhase 1ï¼‰

| ç”»é¢ | ãƒ‘ã‚¹ | èª¬æ˜ |
|------|------|------|
| ãƒ›ãƒ¼ãƒ  | `/` | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€‚ä»Šæ—¥ã®é€²æ—ã€ã‚«ãƒ†ã‚´ãƒªåˆ¥çŠ¶æ…‹ |
| ãƒ—ãƒ¬ã‚¤ç™»éŒ² | `/play` | ã‚«ãƒ†ã‚´ãƒªâ†’ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é¸æŠâ†’ç™»éŒ² |
| ãƒªã‚¶ãƒ«ãƒˆ | `/result` | ä»Šæ—¥ã®ãƒ—ãƒ¬ã‚¤ä¸€è¦§ã€ç¢ºå®šãƒœã‚¿ãƒ³ |
| ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼ | `/skills` | ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ„ãƒªãƒ¼è¡¨ç¤ºã€ãƒãƒ¼ãƒ‰è§£æ”¾ |

---

## 5. ãƒ‰ãƒ¡ã‚¤ãƒ³å¢ƒç•Œ

### 5.1 Play Domainï¼ˆãƒ—ãƒ¬ã‚¤è¨˜éŒ²ï¼‰

ãƒ—ãƒ¬ã‚¤ã®å®šç¾©ã¨è¨˜éŒ²ã‚’ç®¡ç†ã™ã‚‹ã€‚

**ãƒ¢ãƒ‡ãƒ«:**
- `Category` - ãƒ—ãƒ¬ã‚¤ã®ã‚«ãƒ†ã‚´ãƒªåˆ†é¡
- `Action` - ã‚«ãƒ†ã‚´ãƒªå†…ã®å…·ä½“çš„è¡Œå‹•å®šç¾©
- `PlayLog` - å€‹åˆ¥ãƒ—ãƒ¬ã‚¤ã®è¨˜éŒ²

**è²¬å‹™:**
- ã‚«ãƒ†ã‚´ãƒª/ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã® CRUD
- ãƒ—ãƒ¬ã‚¤ãƒ­ã‚°ã®ä½œæˆãƒ»å‰Šé™¤
- ç¢ºå®šå¾Œãƒ—ãƒ¬ã‚¤ã®ç¿Œæ—¥å›ã—åˆ¤å®š

```typescript
// Play Domain ã®ä¸»è¦æ“ä½œ
interface PlayDomain {
  // ã‚«ãƒ†ã‚´ãƒª
  getCategories(): Promise<Category[]>;
  createCategory(name: string): Promise<Category>;
  updateCategory(id: string, data: Partial<Category>): Promise<Category>;

  // ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
  getActions(categoryId: string): Promise<Action[]>;
  createAction(categoryId: string, label: string): Promise<Action>;

  // ãƒ—ãƒ¬ã‚¤ãƒ­ã‚°
  registerPlay(actionId: string, note?: string): Promise<PlayLog>;
  deletePlay(playLogId: string): Promise<void>;
  getPlaysForDay(dayKey: string): Promise<PlayLog[]>;
}
```

### 5.2 Result Domainï¼ˆæ—¥æ¬¡é›†è¨ˆï¼‰

æ—¥æ¬¡ãƒªã‚¶ãƒ«ãƒˆã®çŠ¶æ…‹ç®¡ç†ã¨ç¢ºå®šå‡¦ç†ã‚’æ‹…å½“ã€‚

**ãƒ¢ãƒ‡ãƒ«:**
- `DailyResult` - æ—¥å˜ä½ã®ç¢ºå®šçŠ¶æ…‹ç®¡ç†
- `DailyCategoryResult` - æ—¥Ã—ã‚«ãƒ†ã‚´ãƒªå˜ä½ã®é›†è¨ˆçµæœ

**è²¬å‹™:**
- æ—¥æ¬¡ãƒªã‚¶ãƒ«ãƒˆã®çŠ¶æ…‹é·ç§»ï¼ˆdraft â†’ confirmedï¼‰
- XP/SP ã®è¨ˆç®—ã¨åæ˜ 
- ç¢ºå®šå‡¦ç†ã®ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†

```typescript
// Result Domain ã®ä¸»è¦æ“ä½œ
interface ResultDomain {
  getDailyResult(dayKey: string): Promise<DailyResult | null>;
  getDailyCategoryResults(dayKey: string): Promise<DailyCategoryResult[]>;
  confirmDay(dayKey: string): Promise<void>;
  canConfirm(dayKey: string): Promise<boolean>;
}
```

### 5.3 Growth Domainï¼ˆæˆé•·ã‚·ã‚¹ãƒ†ãƒ ï¼‰

æ’ä¹…ç§°å·ã¨é€±ãƒ©ãƒ³ã‚¯ç§°å·ã‚’ç®¡ç†ã€‚

**ãƒ¢ãƒ‡ãƒ«:**
- `SkillTree` - æ’ä¹…ç§°å·ã®ãƒ„ãƒªãƒ¼å®šç¾©
- `SkillNode` - ãƒ„ãƒªãƒ¼å†…ã®å€‹åˆ¥ãƒãƒ¼ãƒ‰
- `UnlockedNode` - è§£æ”¾æ¸ˆã¿ãƒãƒ¼ãƒ‰ã®è¨˜éŒ²
- `SeasonalTitle` - é€±ãƒ©ãƒ³ã‚¯ç§°å·ã®å®šç¾©

**è²¬å‹™:**
- ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼/ãƒãƒ¼ãƒ‰ã®å®šç¾©ç®¡ç†
- ãƒãƒ¼ãƒ‰è§£æ”¾å¯å¦ã®åˆ¤å®š
- ãƒãƒ¼ãƒ‰è§£æ”¾å‡¦ç†
- é€±ãƒ©ãƒ³ã‚¯ç§°å·ã®åˆ¤å®š

```typescript
// Growth Domain ã®ä¸»è¦æ“ä½œ
interface GrowthDomain {
  // ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼
  getSkillTrees(categoryId: string): Promise<SkillTree[]>;
  getSkillNodes(treeId: string): Promise<SkillNode[]>;

  // ãƒãƒ¼ãƒ‰è§£æ”¾
  canUnlock(nodeId: string): Promise<{ canUnlock: boolean; reason?: string }>;
  unlockNode(nodeId: string): Promise<void>;
  getUnlockedNodes(treeId: string): Promise<UnlockedNode[]>;

  // é€±ãƒ©ãƒ³ã‚¯ç§°å·
  getCurrentSeasonalTitle(categoryId: string): Promise<SeasonalTitle | null>;
  getSeasonalTitles(categoryId: string): Promise<SeasonalTitle[]>;
}
```

### 5.4 Player Domainï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ…‹ï¼‰

ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®ã‚«ãƒ†ã‚´ãƒªåˆ¥çŠ¶æ…‹ã¨æ¶ˆè²»å±¥æ­´ã‚’ç®¡ç†ã€‚

**ãƒ¢ãƒ‡ãƒ«:**
- `PlayerCategoryState` - ã‚«ãƒ†ã‚´ãƒªåˆ¥ã®ç´¯è¨ˆXPãƒ»æœªä½¿ç”¨SP
- `SpendLog` - SPæ¶ˆè²»å±¥æ­´

**è²¬å‹™:**
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ…‹ã®å–å¾—ãƒ»æ›´æ–°
- SPæ¶ˆè²»å±¥æ­´ã®è¨˜éŒ²
- çµ±è¨ˆæƒ…å ±ã®ç®—å‡º

```typescript
// Player Domain ã®ä¸»è¦æ“ä½œ
interface PlayerDomain {
  getPlayerState(categoryId: string): Promise<PlayerCategoryState | null>;
  getAllPlayerStates(): Promise<PlayerCategoryState[]>;
  getSpendLogs(categoryId: string): Promise<SpendLog[]>;
  getTotalStats(): Promise<{
    totalXp: number;
    totalSpEarned: number;
    totalSpSpent: number;
  }>;
}
```

### ãƒ‰ãƒ¡ã‚¤ãƒ³é–“ã®ä¾å­˜é–¢ä¿‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Play Domain  â”‚â”€â”€â”€â”€â–¶â”‚Result Domain â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                   â”‚
        â”‚                   â”‚
        â–¼                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Player Domain â”‚â—€â”€â”€â”€â”€â”‚Growth Domain â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **Play â†’ Result**: ãƒ—ãƒ¬ã‚¤ç™»éŒ²æ™‚ã« DailyCategoryResult ã‚’æ›´æ–°
- **Result â†’ Player**: ç¢ºå®šæ™‚ã« PlayerCategoryState ã‚’æ›´æ–°
- **Growth â†’ Player**: ãƒãƒ¼ãƒ‰è§£æ”¾æ™‚ã« SP ã‚’æ¶ˆè²»

---

## 6. ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ä¸€è¦§

### UC-01: ãƒ—ãƒ¬ã‚¤ç™»éŒ²

| é …ç›® | å†…å®¹ |
|------|------|
| ã‚¢ã‚¯ã‚¿ãƒ¼ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ |
| äº‹å‰æ¡ä»¶ | ã‚«ãƒ†ã‚´ãƒªãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒå­˜åœ¨ |
| åŸºæœ¬ãƒ•ãƒ­ãƒ¼ | 1. ã‚«ãƒ†ã‚´ãƒªé¸æŠ â†’ 2. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é¸æŠ â†’ 3. ãƒ¡ãƒ¢å…¥åŠ›ï¼ˆä»»æ„ï¼‰ â†’ 4. ç™»éŒ² |
| äº‹å¾Œæ¡ä»¶ | PlayLogä½œæˆã€DailyCategoryResult.playCount+1 |
| ä»£æ›¿ãƒ•ãƒ­ãƒ¼ | ç¢ºå®šæ¸ˆã¿æ—¥ã®å ´åˆã€ç¿Œæ—¥ã®dayKeyã§ç™»éŒ² |

### UC-02: æ—¥æ¬¡ç¢ºå®š

| é …ç›® | å†…å®¹ |
|------|------|
| ã‚¢ã‚¯ã‚¿ãƒ¼ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ |
| äº‹å‰æ¡ä»¶ | å¯¾è±¡æ—¥ã®DailyResultãŒdraft |
| åŸºæœ¬ãƒ•ãƒ­ãƒ¼ | 1. ãƒªã‚¶ãƒ«ãƒˆç”»é¢è¡¨ç¤º â†’ 2. ç¢ºå®šãƒœã‚¿ãƒ³æŠ¼ä¸‹ â†’ 3. ç¢ºå®šå‡¦ç†å®Ÿè¡Œ |
| äº‹å¾Œæ¡ä»¶ | DailyResult.status=confirmedã€PlayerCategoryStateæ›´æ–° |
| ä»£æ›¿ãƒ•ãƒ­ãƒ¼ | æ—¢ã«ç¢ºå®šæ¸ˆã¿ã®å ´åˆã€ã‚¨ãƒ©ãƒ¼è¡¨ç¤º |

### UC-03: ãƒãƒ¼ãƒ‰è§£æ”¾

| é …ç›® | å†…å®¹ |
|------|------|
| ã‚¢ã‚¯ã‚¿ãƒ¼ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ |
| äº‹å‰æ¡ä»¶ | SP >= costSpã€å‰æãƒãƒ¼ãƒ‰è§£æ”¾æ¸ˆã¿ |
| åŸºæœ¬ãƒ•ãƒ­ãƒ¼ | 1. ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼è¡¨ç¤º â†’ 2. è§£æ”¾å¯èƒ½ãƒãƒ¼ãƒ‰é¸æŠ â†’ 3. è§£æ”¾ç¢ºèª â†’ 4. è§£æ”¾å‡¦ç† |
| äº‹å¾Œæ¡ä»¶ | UnlockedNodeä½œæˆã€PlayerCategoryState.spUnspentæ¸›å°‘ã€SpendLogä½œæˆ |
| ä»£æ›¿ãƒ•ãƒ­ãƒ¼ | SPä¸è¶³ã¾ãŸã¯å‰ææœªé”ã®å ´åˆã€è§£æ”¾ä¸å¯è¡¨ç¤º |

### UC-04: ã‚«ãƒ†ã‚´ãƒªç®¡ç†

| é …ç›® | å†…å®¹ |
|------|------|
| ã‚¢ã‚¯ã‚¿ãƒ¼ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ |
| äº‹å‰æ¡ä»¶ | ãªã— |
| åŸºæœ¬ãƒ•ãƒ­ãƒ¼ | 1. è¨­å®šç”»é¢ â†’ 2. ã‚«ãƒ†ã‚´ãƒªè¿½åŠ /ç·¨é›†/éè¡¨ç¤º |
| äº‹å¾Œæ¡ä»¶ | Categoryæ›´æ–° |
| ä»£æ›¿ãƒ•ãƒ­ãƒ¼ | éè¡¨ç¤ºæ™‚ã¯é–¢é€£ãƒ‡ãƒ¼ã‚¿ä¿æŒï¼ˆè«–ç†å‰Šé™¤ï¼‰ |

### UC-05: é€²æ—ç¢ºèª

| é …ç›® | å†…å®¹ |
|------|------|
| ã‚¢ã‚¯ã‚¿ãƒ¼ | ãƒ¦ãƒ¼ã‚¶ãƒ¼ |
| äº‹å‰æ¡ä»¶ | ãªã— |
| åŸºæœ¬ãƒ•ãƒ­ãƒ¼ | 1. ãƒ›ãƒ¼ãƒ ç”»é¢è¡¨ç¤º â†’ 2. ä»Šæ—¥ã®é€²æ—ç¢ºèª â†’ 3. ã‚«ãƒ†ã‚´ãƒªåˆ¥çŠ¶æ…‹ç¢ºèª |
| äº‹å¾Œæ¡ä»¶ | ãªã—ï¼ˆå‚ç…§ã®ã¿ï¼‰ |
| è¡¨ç¤ºå†…å®¹ | æœªç¢ºå®šXPã€ç´¯è¨ˆXPã€æœªä½¿ç”¨SPã€ç¾åœ¨ã®é€±ãƒ©ãƒ³ã‚¯ç§°å·ã€è§£æ”¾æ¸ˆã¿ãƒãƒ¼ãƒ‰ |

---

## 7. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼ˆäºˆå®šï¼‰

```
life-game-rpg/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ page.tsx              # ãƒ›ãƒ¼ãƒ ç”»é¢
â”‚   â”‚   â”œâ”€â”€ play/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx          # ãƒ—ãƒ¬ã‚¤ç™»éŒ²
â”‚   â”‚   â”œâ”€â”€ result/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx          # ãƒªã‚¶ãƒ«ãƒˆç”»é¢
â”‚   â”‚   â”œâ”€â”€ skills/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx          # ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â”œâ”€â”€ play/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts      # ãƒ—ãƒ¬ã‚¤é–¢é€£API
â”‚   â”‚   â”‚   â”œâ”€â”€ result/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ route.ts      # ãƒªã‚¶ãƒ«ãƒˆé–¢é€£API
â”‚   â”‚   â”‚   â””â”€â”€ skills/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts      # ã‚¹ã‚­ãƒ«é–¢é€£API
â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/                   # æ±ç”¨UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ play/                 # ãƒ—ãƒ¬ã‚¤é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ result/               # ãƒªã‚¶ãƒ«ãƒˆé–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â””â”€â”€ skills/               # ã‚¹ã‚­ãƒ«é–¢é€£ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ lib/
â”‚       â”œâ”€â”€ prisma.ts             # Prismaã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚       â”œâ”€â”€ domains/
â”‚       â”‚   â”œâ”€â”€ play.ts           # Play Domain
â”‚       â”‚   â”œâ”€â”€ result.ts         # Result Domain
â”‚       â”‚   â”œâ”€â”€ growth.ts         # Growth Domain
â”‚       â”‚   â””â”€â”€ player.ts         # Player Domain
â”‚       â””â”€â”€ utils/
â”‚           â”œâ”€â”€ date.ts           # æ—¥ä»˜ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚           â””â”€â”€ calc.ts           # è¨ˆç®—ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma
â”‚   â”œâ”€â”€ seed.ts
â”‚   â””â”€â”€ migrations/
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ spec_v1.0.md
â”‚   â”œâ”€â”€ architecture.md       # æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ data-model.md
â”‚   â”œâ”€â”€ state-machine.md
â”‚   â”œâ”€â”€ ux-spec.md
â”‚   â””â”€â”€ open-questions.md
â””â”€â”€ public/
```

---

## 8. APIè¨­è¨ˆï¼ˆPhase 1ï¼‰

### Play API

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| GET | `/api/categories` | ã‚«ãƒ†ã‚´ãƒªä¸€è¦§å–å¾— |
| POST | `/api/categories` | ã‚«ãƒ†ã‚´ãƒªä½œæˆ |
| PATCH | `/api/categories/:id` | ã‚«ãƒ†ã‚´ãƒªæ›´æ–° |
| GET | `/api/actions?categoryId=` | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§å–å¾— |
| POST | `/api/actions` | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ä½œæˆ |
| POST | `/api/plays` | ãƒ—ãƒ¬ã‚¤ç™»éŒ² |
| DELETE | `/api/plays/:id` | ãƒ—ãƒ¬ã‚¤å‰Šé™¤ |
| GET | `/api/plays?dayKey=` | æ—¥åˆ¥ãƒ—ãƒ¬ã‚¤å–å¾— |

### Result API

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| GET | `/api/results/:dayKey` | æ—¥æ¬¡ãƒªã‚¶ãƒ«ãƒˆå–å¾— |
| POST | `/api/results/:dayKey/confirm` | æ—¥æ¬¡ç¢ºå®š |

### Skills API

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| GET | `/api/skills/trees?categoryId=` | ã‚¹ã‚­ãƒ«ãƒ„ãƒªãƒ¼ä¸€è¦§ |
| GET | `/api/skills/nodes?treeId=` | ãƒãƒ¼ãƒ‰ä¸€è¦§ |
| POST | `/api/skills/nodes/:id/unlock` | ãƒãƒ¼ãƒ‰è§£æ”¾ |
| GET | `/api/skills/seasonal-titles?categoryId=` | é€±ãƒ©ãƒ³ã‚¯ç§°å·ä¸€è¦§ |
| GET | `/api/skills/seasonal-titles/current?categoryId=` | ç¾åœ¨ã®é€±ãƒ©ãƒ³ã‚¯ |

### Player API

| Method | Endpoint | èª¬æ˜ |
|--------|----------|------|
| GET | `/api/player/states` | å…¨ã‚«ãƒ†ã‚´ãƒªçŠ¶æ…‹ |
| GET | `/api/player/states/:categoryId` | ã‚«ãƒ†ã‚´ãƒªåˆ¥çŠ¶æ…‹ |
| GET | `/api/player/spend-logs?categoryId=` | SPæ¶ˆè²»å±¥æ­´ |

---

## 9. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æ–¹é‡

### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼

```typescript
interface ErrorResponse {
  error: {
    code: string;
    message: string;
    details?: Record<string, unknown>;
  };
}
```

### ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ä¸€è¦§

| ã‚³ãƒ¼ãƒ‰ | HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | èª¬æ˜ |
|--------|---------------|------|
| `NOT_FOUND` | 404 | ãƒªã‚½ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ãªã„ |
| `ALREADY_CONFIRMED` | 400 | æ—¢ã«ç¢ºå®šæ¸ˆã¿ |
| `INSUFFICIENT_SP` | 400 | SPä¸è¶³ |
| `PREREQUISITE_NOT_MET` | 400 | å‰ææ¡ä»¶æœªé”ï¼ˆãƒãƒ¼ãƒ‰è§£æ”¾ï¼‰ |
| `VALIDATION_ERROR` | 400 | ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ |
| `INTERNAL_ERROR` | 500 | ã‚µãƒ¼ãƒãƒ¼å†…éƒ¨ã‚¨ãƒ©ãƒ¼ |

### ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

**NOT_FOUND (404)**

```json
{
  "error": {
    "code": "NOT_FOUND",
    "message": "æŒ‡å®šã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",
    "details": {
      "resource": "PlayLog",
      "id": "clxxx123"
    }
  }
}
```

**INSUFFICIENT_SP (400)**

```json
{
  "error": {
    "code": "INSUFFICIENT_SP",
    "message": "SPãŒä¸è¶³ã—ã¦ã„ã¾ã™",
    "details": {
      "required": 5,
      "available": 3,
      "nodeId": "health-node-3"
    }
  }
}
```

**VALIDATION_ERROR (400)**

```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "å…¥åŠ›å€¤ãŒä¸æ­£ã§ã™",
    "details": {
      "field": "note",
      "reason": "æœ€å¤§500æ–‡å­—ã¾ã§"
    }
  }
}
```

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒª

React Error Boundary ã‚’ä½¿ç”¨ã—ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒƒãƒã—ã€ã‚¢ãƒ—ãƒªå…¨ä½“ã®ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚’é˜²ãã€‚

#### ä½¿ç”¨æ–¹é‡

```tsx
// src/components/error-boundary.tsx
"use client";

import { Component, ReactNode } from "react";

interface Props {
  children: ReactNode;
  fallback?: ReactNode;
}

interface State {
  hasError: boolean;
  error?: Error;
}

export class ErrorBoundary extends Component<Props, State> {
  constructor(props: Props) {
    super(props);
    this.state = { hasError: false };
  }

  static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {
    // ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°é€ä¿¡ï¼ˆå°†æ¥çš„ã«Sentryç­‰ã¨é€£æºï¼‰
    console.error("ErrorBoundary caught:", error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return this.props.fallback ?? <DefaultErrorFallback />;
    }
    return this.props.children;
  }
}
```

#### ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºUIãƒ‘ã‚¿ãƒ¼ãƒ³

```tsx
// ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
function DefaultErrorFallback() {
  return (
    <div className="flex flex-col items-center justify-center min-h-[200px] p-6">
      <h2 className="text-lg font-semibold text-destructive">
        ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ
      </h2>
      <p className="mt-2 text-muted-foreground">
        ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„
      </p>
      <Button
        className="mt-4"
        onClick={() => window.location.reload()}
      >
        å†èª­ã¿è¾¼ã¿
      </Button>
    </div>
  );
}
```

#### é©ç”¨ç®‡æ‰€

| ç®‡æ‰€ | ç›®çš„ |
|------|------|
| `layout.tsx`ï¼ˆãƒ«ãƒ¼ãƒˆï¼‰ | ã‚¢ãƒ—ãƒªå…¨ä½“ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ |
| å„ç”»é¢ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ç”»é¢å˜ä½ã§ã®ã‚¨ãƒ©ãƒ¼åˆ†é›¢ |
| `SkillTreeView` | è¤‡é›‘ãªUIã®ã‚¨ãƒ©ãƒ¼åˆ†é›¢ |

---

## 10. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

> âš ï¸ **é‡è¦**: Auth.js å°å…¥å¾Œã‚‚ã€userId ä»˜ä¸ã¨èªå¯ãŒæœªå®Ÿè£…ã®ãŸã‚ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã«å…¬é–‹ã—ãªã„ã“ã¨ã€‚
> ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã¾ãŸã¯èªè¨¼ä»˜ããƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·çµŒç”±ã§ã®ã¿ä½¿ç”¨ã™ã‚‹ã“ã¨ã€‚

### Phase 1ï¼ˆã‚·ãƒ³ã‚°ãƒ«ãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

- èªè¨¼åŸºç›¤ã‚ã‚Šï¼ˆ**å…¬é–‹ãƒ‡ãƒ—ãƒ­ã‚¤å³ç¦**ã€èªå¯æœªå®Ÿè£…ï¼‰
- å…¨ãƒ‡ãƒ¼ã‚¿ã¯ã‚µãƒ¼ãƒãƒ¼å´PostgreSQLã«ä¿å­˜
- SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–: Prismaã®å‹å®‰å…¨ã‚¯ã‚¨ãƒªä½¿ç”¨
- XSSå¯¾ç­–: Reactã®è‡ªå‹•ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—

### å°†æ¥ï¼ˆãƒãƒ«ãƒãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œæ™‚ï¼‰

- èªè¨¼ã‚·ã‚¹ãƒ†ãƒ æ´»ç”¨ï¼ˆAuth.js / NextAuthï¼‰
- å…¨ãƒ¢ãƒ‡ãƒ«ã«userIdè¿½åŠ ã¨èªå¯ã®å®Ÿè£…
- Row Level Securityæ¤œè¨
- CSRFå¯¾ç­–

---

## 11. ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ãƒãƒªã‚·ãƒ¼

> ğŸ“Œ **åŸºæœ¬æ–¹é‡: è«–ç†å‰Šé™¤ï¼ˆ`visible = false`ï¼‰ã‚’æ¡ç”¨ã—ã€å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã‚’ä¿æŒã™ã‚‹**

### è«–ç†å‰Šé™¤ã®æ¡ç”¨ç†ç”±

- **æŒ¯ã‚Šè¿”ã‚Šå¯èƒ½**: éå»ã®ãƒ—ãƒ¬ã‚¤å±¥æ­´ãƒ»æˆé•·è¨˜éŒ²ã‚’ã„ã¤ã§ã‚‚å‚ç…§ã§ãã‚‹
- **ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§**: ç´¯è¨ˆXPãƒ»SPãƒ»é€±ãƒ©ãƒ³ã‚¯è¨ˆç®—ã®æ­£ç¢ºæ€§ã‚’ç¶­æŒ
- **å¾©å…ƒå¯èƒ½**: èª¤ã£ã¦éè¡¨ç¤ºã«ã—ãŸã‚«ãƒ†ã‚´ãƒªã‚’ç°¡å˜ã«å¾©æ´»ã§ãã‚‹
- **ç›£æŸ»è¨¼è·¡**: ã„ã¤ä½•ã‚’ã—ãŸã‹ã®è¨˜éŒ²ãŒæ®‹ã‚‹

### å‰Šé™¤æ–¹æ³•ã®æ¯”è¼ƒ

| æ–¹æ³• | æ“ä½œ | ãƒ‡ãƒ¼ã‚¿ | ç”¨é€” |
|------|------|--------|------|
| **è«–ç†å‰Šé™¤ï¼ˆæ¨å¥¨ï¼‰** | `visible = false` | ä¿æŒ | é€šå¸¸é‹ç”¨ã€ã‚«ãƒ†ã‚´ãƒªæ•´ç† |
| ç‰©ç†å‰Šé™¤ï¼ˆéæ¨å¥¨ï¼‰ | DELETE | å–ªå¤± | å°†æ¥ã®ç®¡ç†æ©Ÿèƒ½ã¨ã—ã¦æ¤œè¨ |

### ç‰©ç†å‰Šé™¤æ™‚ã®å½±éŸ¿ç¯„å›²ï¼ˆå‚è€ƒï¼‰

Category ã‚’ç‰©ç†å‰Šé™¤ã™ã‚‹ã¨ã€ä»¥ä¸‹ãŒé€£é–å‰Šé™¤ã•ã‚Œã¾ã™ï¼š
- å…¨ Actionï¼ˆã‚«ãƒ†ã‚´ãƒªå†…ã®å…¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®šç¾©ï¼‰
- å…¨ PlayLogï¼ˆéå»ã®å…¨ãƒ—ãƒ¬ã‚¤è¨˜éŒ²ï¼‰
- å…¨ DailyCategoryResultï¼ˆæ—¥æ¬¡é›†è¨ˆãƒ‡ãƒ¼ã‚¿ï¼‰
- PlayerCategoryStateï¼ˆç´¯è¨ˆXP/SPï¼‰
- å…¨ SkillTree / SkillNode / UnlockedNodeï¼ˆç§°å·ãƒ»è§£æ”¾å±¥æ­´ï¼‰
- å…¨ SeasonalTitleï¼ˆé€±ãƒ©ãƒ³ã‚¯å®šç¾©ï¼‰
- å…¨ SpendLogï¼ˆSPæ¶ˆè²»å±¥æ­´ï¼‰

### å®Ÿè£…æŒ‡é‡

**Phase 1:**
- UIä¸Šã§ã€Œå‰Šé™¤ã€ãƒœã‚¿ãƒ³ã¯ `visible = false` ã‚’è¨­å®šã™ã‚‹è«–ç†å‰Šé™¤ã¨ã—ã¦å®Ÿè£…
- ç‰©ç†å‰Šé™¤æ©Ÿèƒ½ã¯æä¾›ã—ãªã„
- éè¡¨ç¤ºã‚«ãƒ†ã‚´ãƒªã¯è¨­å®šç”»é¢ã§å†è¡¨ç¤ºå¯èƒ½ã«ã™ã‚‹

**å°†æ¥ï¼ˆPhase 2ä»¥é™ï¼‰:**
- ç®¡ç†ç”»é¢ã§ã€Œå®Œå…¨å‰Šé™¤ã€æ©Ÿèƒ½ã‚’æ¤œè¨ã™ã‚‹å ´åˆã¯ã€ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§å½±éŸ¿ç¯„å›²ã‚’æ˜ç¤º
- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã¨çµ„ã¿åˆã‚ã›ã€å‰Šé™¤å‰ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä¿ƒã™

---

## æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | æ›´æ–°å†…å®¹ |
|------|----------|
| 2026-01-19 | åˆç‰ˆä½œæˆ |
